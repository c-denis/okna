# CRM для сервиса оконных ремонтов "Окна"

Простая и эффективная CRM-система для управления заявками на ремонтные услуги с интеграцией Telegram для уведомлений.

## Ключевая информация
- **Цель**: Автоматизация работы с заявками (создание, назначение, отслеживание статусов)
- **Основные пользователи**: 
  - Операторы (создание заявок)
  - Координаторы (назначение мастеров)
  - Мастера (отметки о выполнении)
  - Администраторы (отчеты и управление)
- **Технологии**:
  - Frontend: Vue.js
  - Backend: Django (Python)
  - БД: PostgreSQL
  - Уведомления: Telegram Bot API

## Структура проекта

okna/
├── backend/ # Django-приложение
│ ├── api/ # API endpoints
│ ├── models/ # Модели данных
│ ├── management/ # CLI-команды
│ └── ...
├── frontend/ # Vue.js приложение
│ ├── src/
│ │ ├── components/ # UI-компоненты
│ │ ├── views/ # Страницы
│ │ └── ...
│ └── ...
├── telegram_bot/ # Сервис уведомлений
├── docker-compose.yml # Конфигурация контейнеров
└── README.md


## Реализовано по ТЗ
✅ **Основной функционал заявок**:
- Создание заявок с полями: ФИО клиента, телефон, адрес, комментарий
- Назначение мастеров с проверкой на занятость (не более 1 заявки)
- 5 статусов заявок: "Не назначена", "Назначена", "В работе", "Исполнена", "Отказ"
- Цветовая индикация статусов в интерфейсе

✅ **Управление пользователями**:
- Ролевая модель (оператор, координатор, мастер, администратор)
- Статусы мастеров с цветовой индикацией

✅ **Уведомления**:
- Telegram-бот для оповещений о новых заявках
- Формат: "Новая заявка №155026 (14:01)\nКлиент: Ника Дмитриевна\nАдрес: ул. Белорусская, д. 34, кв. 3"

✅ **Отчетность**:
- Сводные отчеты по локациям
- Готовые периоды: сегодня/неделя/месяц

## Требуется реализовать
🔧 **По текущему ТЗ**:
- [ ] Интеграция черного списка клиентов
- [ ] Подтверждение резервного копирования БД
- [ ] Фиксация времени входа/выхода мастера
- [ ] Валидация телефона при создании заявки

## План развития
📅 **Будущие улучшения**:
- **Безопасность**:
  - Двухфакторная аутентификация для админов
  - Система логирования критичных действий
- **Производительность**:
  - Оптимизация запросов к БД (индексы)
  - Кэширование частых запросов
- **Интеграции**:
  - API для мобильного приложения (отметки о входе/выходе)
- **Доп. функционал**:
  - История изменений заявок
  - Гибкие фильтры в отчетах

## Установка и запуск
```bash
docker-compose up -d

Доступ к интерфейсу: http://localhost:8080


Ключевые особенности:
1. Четкое разделение на реализованное/нереализованное
2. План развития вынесен отдельным блоком с вашими правками
3. Добавлена визуальная индикация статусов (✅/🔧)
4. Упрощены технические детали там, где это не критично
5. Включена базовая инструкция по запуску

Файл готов к размещению в корне репозитория. При необходимости можно добавить больше технических деталей в раздел установки.

Краткая структура проекта

okna/
├── backend/ # Django-приложение
│ ├── api/ # API endpoints
│ ├── models/ # Модели данных
│ ├── management/ # CLI-команды
│ └── ...
├── frontend/ # Vue.js приложение
│ ├── src/
│ │ ├── components/ # UI-компоненты
│ │ ├── views/ # Страницы
│ │ └── ...
│ └── ...
├── telegram_bot/ # Сервис уведомлений
├── docker-compose.yml # Конфигурация контейнеров
└── README.md

Полная структура проекта

Okna/
├── .env                      # Переменные окружения (SECRET_KEY, DB_URL, TELEGRAM_TOKEN)
├── .gitignore                # Игнорируемые файлы для Git
├── docker-compose.yml        # Конфигурация контейнеров
├── README.md                 # Основная документация
│
├── backend/                  # Django-приложение
│   ├── config/               # Конфигурация проекта
│   │   ├── __init__.py
│   │   ├── settings.py       # Основные настройки (перенесено из crm_core)
│   │   ├── urls.py           # Главные URL-маршруты
│   │   └── wsgi.py            # WSGI-конфигурация
│   │
│   ├── apps/                 # Модульные приложения
│   │   ├── orders/           # Заявки
│   │   │   ├── __init__.py
│   │   │   ├── admin.py      # Админ-панель
│   │   │   ├── models.py     # Модель Order, Status и др.
│   │   │   ├── views.py      # CBV для заявок
│   │   │   └── urls.py       # Локальные маршруты
│   │   │
│   │   └── users/            # Пользователи
│   │       ├── __init__.py
│   │       ├── models.py     # Custom User, Role
│   │       ├── views.py      # Управление пользователями
│   │       └── urls.py
│   │
│   ├── api/                  # REST API
│   │   ├── __init__.py
│   │   ├── views.py          # APIView для заявок/пользователей
│   │   ├── serializers.py    # DRF-сериализаторы
│   │   └── urls.py          # API endpoints
│   │
│   ├── utils/                # Вспомогательные модули
│   │   ├── __init__.py
│   │   ├── logging.py       # Конфигурация логов (заменяет logs/debug.log)
│   │   └── security.py      # Хелперы безопасности
│   │
│   ├── templates/           # Шаблоны (если нужны)
│   │   └── base.html
│   │
│   ├── static/              # Статические файлы
│   │   ├── css/
│   │   └── js/
│   │
│   ├── manage.py
│   └── requirements.txt    # Зависимости
│
├── frontend/                     # Vue 3 + Vite
│   ├── public/                   # Публичные файлы
│   │   ├── favicon.ico
│   │   └── index.html            # Точка входа
│   │
│   ├── src/
│   │   ├── assets/               # Ресурсы
│   │   │   ├── fonts/            # Шрифты
│   │   │   └── scss/             # Глобальные стили
│   │   │
│   │   ├── components/           # Компоненты UI
│   │   │   ├── app/
│   │   │   │   ├── AppHeader.vue # Шапка
│   │   │   │   └── AppSidebar.vue # Меню
│   │   │   │
│   │   │   ├── orders/
│   │   │   │   ├── OrderCard.vue # Карточка заявки
│   │   │   │   └── OrderForm.vue # Форма создания
│   │   │   │
│   │   │   └── ui/
│   │   │       ├── StatusBadge.vue # Бейдж статуса
│   │   │       └── DatePicker.vue  # Выбор даты
│   │   │
│   │   ├── composables/          # Композаблы Vue 3
│   │   │   ├── useApi.js         # HTTP-клиент
│   │   │   └── useAuth.js        # Логика авторизации
│   │   │
│   │   ├── router/               # Маршруты
│   │   │   └── index.js          # Конфигурация роутера
│   │   │
│   │   ├── stores/               # Pinia-сторе
│   │   │   ├── orders.js         # Стор заявок
│   │   │   └── users.js          # Стор пользователей
│   │   │
│   │   ├── views/                # Страницы
│   │   │   ├── AuthView.vue      # Авторизация
│   │   │   ├── OrdersView.vue    # Список заявок
│   │   │   ├── ReportView.vue    # Отчеты
│   │   │   └── UserProfile.vue   # Профиль
│   │   │
│   │   ├── App.vue               # Корневой компонент
│   │   └── main.js               # Инициализация приложения
│   │
│   ├── .eslintrc.js              # Линтер
│   ├── jsconfig.json             # Конфиг JavaScript
│   ├── package.json              # Зависимости npm
│   └── vite.config.js            # Конфиг сборки
│
├── infra/                        # Инфраструктура
│   ├── nginx/                    # Конфиг Nginx
│   │   └── default.conf
│   │
│   ├── postgres/                 # Конфиг PostgreSQL
│   │   └── init.sql              # Инициализация БД
│   │
│   └── scripts/                  # Скрипты развертывания
│       ├── deploy.sh             # Деплой
│       └── migrate.sh            # Применение миграций
│
├── telegram_bot/                 # Бот для уведомлений
│   ├── __init__.py
│   ├── bot.py                    # Основной скрипт
│   ├── handlers/                 # Обработчики
│   │   ├── commands.py           # CLI-команды
│   │   └── notifications.py      # Логика уведомлений
│   │
│   ├── services/                 # Сервисы
│   │   └── order_notifier.py     # Уведомления о заявках
│   │
│   ├── tests/                    # Тесты
│   │   └── test_handlers.py
│   │
│   └── requirements.txt          # Зависимости бота
│
└── tests/                        # Интеграционные тесты
    ├── e2e/                      # End-to-end тесты
    │   └── orders.test.js        # Тесты заявок
    │
    └── unit/                     # Юнит-тесты
        ├── frontend/             # Тесты Vue
        └── backend/              # Тесты Django